---
title: "[AWS] EBS & 인스턴스 스토어"
date: '2021-10-30 01:02:14'
categories: AWS
toc: true
toc_sticky: true
sidebar:
  nav: docs
---
## 1. EBS (Elastic Block Store) 란?

EBS란 AWS가 제공하는 블록 수준 스토리지 볼륨이다. 하나의 가용영역 서버들의 자원을 모아 EBS를 생성하기 때문에 99.9999%의 가용성을 제공한다. 생성된 EBS는 물리적 하드디스크처럼 동일한 가용영역에서 생성된 EC2 장치에 탈부착할 수 있다.

EBS는 독립적이기 때문에 탈부착하더라도 데이터는 유효하다.



## 2. EBS 스냅샷

EBS는 스냅샷을 만들어 증분식 백업할 수 있다. 요금은 저장된 데이터 양에 따라 결정된다.

스냅샷 작업 시점에 플러시되지 않은 쓰기가 문제를 일으킬 수 있으므로 스냅샷을 생성할 때에는 ```fsfreeze -f <마운트디렉토리>``` 명령을 통해 EBS를 얼려야 한다. 스냅샷 생성 실행 후 바로 ```fsfreeze -u <마운트디렉토리>``` 명령으로 파일시스템 엑세스를 허용해도 된다.

생성된 스냅샷은 다른 가용 영역에서도 사용 가능하다.



## 3. EBS 볼륨 유형

### 1) SSD

SSD 지원 볼륨은 크게 **범용 SSD** 와 **Provisioned IOPS SSD** 로 나뉜다. 

**범용 SSD**

가격과 성능간의 균형이 잡힌 볼륨이다. **gp2** 와 **gp3** 가 있으며, 볼륨당 최대 처리량에 차이가 있다.



**Provisioned IOPS SSD**

보다 고성능을 위한 볼륨이다. 16,000 IOPS 이상이 필요한 워크로드일 때 사용된다. **io2Block Express, io2, io1** 이 있다. 이 유형의 볼륨을 사용할 경우 하나의 EBS에 여러 인스턴스를 연결할 수 있다.



### 2) HDD

HDD 지원 볼륨은 **처리량 최적화 HDD**와 **콜드 HDD** 로 나뉜다. 처리량은 당연히 SSD보다 낮지만 더 저렴하다.

**처리량 최적화 HDD**

자주 액세스하는 처리량 집약적 워크로드에 적합한 저비용 HDD이다.



**콜드 HDD**

자주 액세스하지 않는 워크로드에 적합한 가장 저렴한 HDD 이다.





## 4. 인스턴스 스토어

인스턴스 스토어는 일반 하드디스크와 같은 블록 레벨 스토리지로, 호스트 컴퓨터에 물리적으로 연결된 디스크에 위치한다. 따라서 EBS보다 더 높은 IOPS를 가진다. 

하지만 직접 연결되어 있다는 개념이기 때문에 인스턴스 스토어는 EC2 인스턴스에 종속적이다. 인스턴스 스토어가 부착되어 있는 인스턴스 타입이 따로 존재한다. 인스턴스가 실행중일 때만 사용되며, 인스턴스가 삭제되면 함께 삭제된다. 

인스턴스 스토어의 비용은 따로 지불하지 않고, EC2 인스턴스 가격에 포함되어 있다.

버퍼, 캐시와 같이 자주 변경되는 임시 데이터나 로드가 분산된 웹 서버 풀과 같은 여러 인스턴스상에서 복제되는 데이터게 적합하다.